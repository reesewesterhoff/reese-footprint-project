(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{307:function(e,t,a){e.exports=a.p+"static/media/hospital.a28e40fc.svg"},308:function(e,t,a){e.exports=a.p+"static/media/business.9cb593d8.svg"},309:function(e,t,a){e.exports=a.p+"static/media/home.ebab5843.svg"},310:function(e,t,a){e.exports=a.p+"static/media/restaurant.4fb66787.svg"},311:function(e,t,a){e.exports=a.p+"static/media/router.013ab19d.svg"},312:function(e,t,a){e.exports=a.p+"static/media/security.b1943b75.svg"},313:function(e,t,a){e.exports=a.p+"static/media/store.59fc7bba.svg"},314:function(e,t,a){e.exports=a.p+"static/media/waves.ec165121.svg"},318:function(e,t,a){e.exports=a(766)},347:function(e,t,a){},349:function(e,t,a){},491:function(e,t,a){},757:function(e,t,a){},759:function(e,t,a){},761:function(e,t,a){},764:function(e,t,a){},766:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(39),o=a.n(s),i=a(59),l=a(12),c=a(316),p=(a(327),Object(i.c)({loginMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch((arguments.length>1?arguments[1]:void 0).type){case"CLEAR_LOGIN_ERROR":return"";case"LOGIN_INPUT_ERROR":return"Enter your username and password!";case"LOGIN_FAILED":return"Oops! The username and password didn't match. Try again!";case"LOGIN_FAILED_NO_CODE":return"Oops! Something went wrong! Is the server running?";default:return e}},registrationMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch((arguments.length>1?arguments[1]:void 0).type){case"CLEAR_REGISTRATION_ERROR":return"";case"REGISTRATION_INPUT_ERROR":return"Choose a username and password!";case"REGISTRATION_FAILED":return"Oops! That didn't work. The username might already be taken. Try again!";default:return e}}})),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login";switch((arguments.length>1?arguments[1]:void 0).type){case"SET_TO_LOGIN_MODE":return"login";case"SET_TO_REGISTER_MODE":return"register";default:return e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.payload;case"UNSET_USER":return{};default:return e}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SITE_TYPES":return t.payload;case"UNSET_USER":case"ADD_SITE_TO_PROJECT":return[];default:return e}},m=a(156),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SITE":return Object(m.a)(e).concat([t.payload]);case"CLEAR_FORM":case"UNSET_USER":return[];default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_GENERATOR":return Object(m.a)(e).concat([t.payload]);case"CLEAR_FORM":case"UNSET_USER":return[];default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SELECTED_SITE":return t.payload;case"UNSET_USER":case"ADD_SITE_TO_PROJECT":return{};default:return e}},b=a(33),y=a.n(b),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RUN_DIESEL_CALCULATION":for(var a=y()(t.payload.sites[0].fundStartDate),n=y()(t.payload.sites[0].fundEndDate),r=Number(n.diff(a,"months")),s=0,o=0;o<t.payload.sites[0].siteGenerators.length;o++)s+=Number(t.payload.sites[0].siteGenerators[o].monthlyCost);return{totalDieselCost:Number(r*s),timeToPayOff:t.payload.timeToPayOff,payOffDate:t.payload.payOffDate,payOffInTime:t.payload.payOffInTime,timeline:t.payload.timeline};case"UNSET_USER":return{};default:return e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PROJECTS":return t.payload;case"UNSET_USER":return[];default:return e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_PROJECT":return t.payload;default:return e}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PROJECT":return t.payload;case"UNSET_USER":return[];default:return e}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SITES_BY_PROJECT":return t.payload;case"UNSET_USER":return[];default:return e}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ALL_SITE_TYPES":return t.payload;default:return e}},x=Object(i.c)({errors:p,loginMode:u,user:d,siteTypes:h,sites:g,generator:E,selectedSite:f,dieselCalculation:v,projectsReducer:S,projectId:O,project:C,sitesByProject:j,allSiteTypes:T}),w=a(7),k=a.n(w),_=a(8),N=a(29),D=a.n(N),I=k.a.mark(L),R=k.a.mark(A),P=k.a.mark(M);function L(e){var t;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(_.c)({type:"CLEAR_LOGIN_ERROR"});case 3:return t={headers:{"Content-Type":"application/json"},withCredentials:!0},a.next=6,D.a.post("api/user/login",e.payload,t);case 6:return a.next=8,Object(_.c)({type:"FETCH_USER"});case 8:a.next=20;break;case 10:if(a.prev=10,a.t0=a.catch(0),console.log("Error with user login:",a.t0),401!==a.t0.response.status){a.next=18;break}return a.next=16,Object(_.c)({type:"LOGIN_FAILED"});case 16:a.next=20;break;case 18:return a.next=20,Object(_.c)({type:"LOGIN_FAILED_NO_CODE"});case 20:case"end":return a.stop()}},I,this,[[0,10]])}function A(e){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={headers:{"Content-Type":"application/json"},withCredentials:!0},e.next=4,D.a.post("api/user/logout",t);case 4:return e.next=6,Object(_.c)({type:"UNSET_USER"});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error with user logout:",e.t0);case 11:case"end":return e.stop()}},R,this,[[0,8]])}function M(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.f)("LOGIN",L);case 2:return e.next=4,Object(_.f)("LOGOUT",A);case 4:case"end":return e.stop()}},P,this)}var B=M,F=k.a.mark(G),U=k.a.mark(z);function G(e){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(_.c)({type:"CLEAR_REGISTRATION_ERROR"});case 3:return t.next=5,D.a.post("api/user/register",e.payload);case 5:return t.next=7,Object(_.c)({type:"LOGIN",payload:e.payload});case 7:return t.next=9,Object(_.c)({type:"SET_TO_LOGIN_MODE"});case 9:t.next=16;break;case 11:return t.prev=11,t.t0=t.catch(0),console.log("Error with user registration:",t.t0),t.next=16,Object(_.c)({type:"REGISTRATION_FAILED"});case 16:case"end":return t.stop()}},F,this,[[0,11]])}function z(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.f)("REGISTER",G);case 2:case"end":return e.stop()}},U,this)}var W=z,J=k.a.mark(q),H=k.a.mark(Y);function q(){var e,t;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e={headers:{"Content-Type":"application/json"},withCredentials:!0},a.next=4,D.a.get("api/user",e);case 4:return t=a.sent,a.next=7,Object(_.c)({type:"SET_USER",payload:t.data});case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("User get request failed",a.t0);case 12:case"end":return a.stop()}},J,this,[[0,9]])}function Y(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.f)("FETCH_USER",q);case 2:case"end":return e.stop()}},H,this)}var Z=Y,$=k.a.mark(K),V=k.a.mark(Q),X=k.a.mark(ee);function K(e){var t;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("action.payload",e.payload),a.prev=1,a.next=4,Object(_.b)(D.a.get,"api/sitetypes/".concat(e.payload));case 4:return t=a.sent,a.next=7,Object(_.c)({type:"SET_SITE_TYPES",payload:t.data});case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),console.log("Site types get request failed",a.t0);case 12:case"end":return a.stop()}},$,this,[[1,9]])}function Q(e){var t;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("action.payload",e.payload),a.prev=1,a.next=4,Object(_.b)(D.a.get,"api/sitetypes");case 4:return t=a.sent,a.next=7,Object(_.c)({type:"SET_ALL_SITE_TYPES",payload:t.data});case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),console.log("Site types get request failed",a.t0);case 12:case"end":return a.stop()}},V,this,[[1,9]])}function ee(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.f)("FETCH_SITE_TYPES",K);case 2:return e.next=4,Object(_.f)("FETCH_ALL_SITE_TYPES",Q);case 4:case"end":return e.stop()}},X,this)}var te=ee,ae=k.a.mark(re),ne=k.a.mark(se);function re(){var e,t,a,n,r,s,o,i,l;return k.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(_.d)(function(e){return e.sites});case 3:return e=c.sent,c.next=6,Object(_.d)(function(e){return e.selectedSite});case 6:return t=c.sent,c.next=9,Object(_.d)(function(e){return e.generator});case 9:return a=c.sent,n=y()(e[0].fundStartDate),r=y()(e[0].fundEndDate),s=r.diff(n,"months"),o=t.total_price/a.map(function(e){return parseInt(e.monthlyCost)}).reduce(function(e,t){return e+t}),i=n.add(o,"months"),l=i.isBefore(r),console.log("selectedSite",t,"generators",a),c.next=19,Object(_.c)({type:"RUN_DIESEL_CALCULATION",payload:{sites:e,timeToPayOff:o,payOffDate:i,payOffInTime:l,timeline:s}});case 19:c.next=24;break;case 21:c.prev=21,c.t0=c.catch(0),console.log("Could not set results",c.t0);case 24:case"end":return c.stop()}},ae,this,[[0,21]])}function se(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.f)("SET_SELECTED_SITE",re);case 2:case"end":return e.stop()}},ne,this)}var oe=se,ie=k.a.mark(de),le=k.a.mark(he),ce=k.a.mark(me),pe=k.a.mark(ge),ue=k.a.mark(Ee);function de(e){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(_.b)(D.a.post,"/projects",e.payload);case 3:return t.next=5,Object(_.c)({type:"GET_PROJECTS"});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("error adding project",t.t0);case 10:case"end":return t.stop()}},ie,this,[[0,7]])}function he(e){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.get("/projects");case 3:return t=e.sent,e.next=6,Object(_.c)({type:"SET_PROJECTS",payload:t.data});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error getting projects:",e.t0);case 11:case"end":return e.stop()}},le,this,[[0,8]])}function me(e){var t,a;return k.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,n.next=4,D.a.get("/projects/".concat(t));case 4:return a=n.sent,n.next=7,Object(_.c)({type:"SET_PROJECT",payload:a.data});case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.log("error getting projects:",n.t0);case 12:case"end":return n.stop()}},ce,this,[[1,9]])}function ge(e){var t,a;return k.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.prev=1,n.next=4,D.a.get("/projects/sites/".concat(t));case 4:return a=n.sent,n.next=7,Object(_.c)({type:"SET_SITES_BY_PROJECT",payload:a.data});case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.log("error getting projects:",n.t0);case 12:case"end":return n.stop()}},pe,this,[[1,9]])}function Ee(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.f)("ADD_PROJECT",de);case 2:return e.next=4,Object(_.f)("GET_PROJECTS",he);case 4:return e.next=6,Object(_.f)("GET_PROJECT",me);case 6:return e.next=8,Object(_.f)("GET_SITES_BY_PROJECT",ge);case 8:case"end":return e.stop()}},ue,this)}var fe=Ee,be=k.a.mark(ve),ye=k.a.mark(Se);function ve(e){var t,a;return k.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,console.log("Inside addSite function"),!e.payload.project_id){n.next=12;break}return n.next=5,D.a.post("/projects/sites",e.payload);case 5:return t=n.sent,a=t.data.site_id,console.log("site_id=",a),n.next=10,D.a.post("/projects/generators/".concat(a),e.payload.generators);case 10:return n.next=12,Object(_.c)({type:"GET_SITES_BY_PROJECT",payload:e.payload.project_id});case 12:n.next=17;break;case 14:n.prev=14,n.t0=n.catch(0),console.log("Error adding site to project:",n.t0);case 17:case"end":return n.stop()}},be,this,[[0,14]])}function Se(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.e)("ADD_SITE_TO_PROJECT",ve);case 2:case"end":return e.stop()}},ye,this)}var Oe=Se,Ce=k.a.mark(je);function je(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_.a)([B(),W(),Z(),te(),oe(),fe(),Oe()]);case 2:case"end":return e.stop()}},Ce,this)}var Te=a(9),xe=a(10),we=a(13),ke=a(11),_e=a(14),Ne=a(769),De=a(772),Ie=a(770),Re=a(768),Pe=a(767),Le=Object(l.b)()(function(e){return r.a.createElement("button",{className:e.className,onClick:function(){return e.dispatch({type:"LOGOUT"})}},"Log Out")}),Ae=(a(347),Object(l.b)(function(e){return{user:e.user}})(function(e){return r.a.createElement("div",{className:"nav"},r.a.createElement("h2",{className:"nav-title"},"Footprint Project Transition Tool"),r.a.createElement("div",{className:"nav-right"},r.a.createElement(Pe.a,{className:"nav-link",to:"/dashboard"},e.user.id?"Dashboard":"Login / Register"),e.user.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Le,{className:"nav-link"})),!e.user.id&&r.a.createElement(Pe.a,{className:"nav-link",to:"/add_site"},"Try It!")))})),Me=a(32),Be=a(30),Fe=(a(349),a(25)),Ue=a(45),Ge=a.n(Ue),ze=a(200),We=a.n(ze),Je=a(20),He=a.n(Je),qe=a(31),Ye=a.n(qe);var Ze=function(e){function t(){var e,a;Object(Te.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(we.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(r)))).state={open:a.props.modalOpen},a}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("span",null,r.a.createElement(He.a,{className:e.button,onClick:this.props.handleModalToggle,variant:"contained",color:this.props.color,classes:{label:this.props.classes.label}},this.props.buttonText),r.a.createElement(We.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.props.modalOpen,onClose:this.props.handleClose},r.a.createElement("div",{style:{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")},className:e.paper},r.a.createElement(Ge.a,{variant:"h6",id:"modal-title"},this.props.title),r.a.createElement("br",null),r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement(Ye.a,{type:"text",label:"Name",variant:"outlined",value:this.props.state.name,onChange:this.props.handleChangeFor("name")})),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(Ye.a,{type:"text",label:"Email Address",variant:"outlined",value:this.props.state.email,onChange:this.props.handleChangeFor("email")})),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(Ye.a,{type:"text",label:"Message",variant:"outlined",multiline:!0,value:this.props.state.message,onChange:this.props.handleChangeFor("message")})),r.a.createElement("br",null),r.a.createElement(He.a,{color:this.props.color,variant:"outlined",onClick:this.props.handleSubmit(this.props.subject)},"Submit")))))}}]),t}(n.Component),$e=Object(Fe.withStyles)(function(e){return{paper:{position:"absolute",width:50*e.spacing.unit,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit,textAlign:"center"},button:{margin:10}}})(Ze),Ve=a(55),Xe=a.n(Ve),Ke=function(e){function t(){var e,a;Object(Te.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(we.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(r)))).state={contactExpertOpen:!1,reportBugOpen:!1,snackbarOpen:!1,name:"",email:"",message:""},a.handleChangeFor=function(e){return function(t){a.setState(Object(Be.a)({},a.state,Object(Me.a)({},e,t.target.value)))}},a.handleContactExpertToggle=function(){a.setState(Object(Be.a)({},a.state,{contactExpertOpen:!a.state.contactExpertOpen,reportBugOpen:!1}))},a.handleClose=function(){return a.setState(Object(Be.a)({},a.state,{contactExpertOpen:!1,reportBugOpen:!1}))},a.handleSubmit=function(e){return function(t){t.preventDefault(),D.a.post("/email",{content:{name:a.state.name,email:a.state.email,subject:e,message:a.state.message},siteName:a.props.sites.length?a.props.sites[0].siteName:"Not entered",fundStartDate:a.props.sites.length?a.props.sites[0].fundStartDate:"Not entered",fundEndDate:a.props.sites.length?a.props.sites[0].fundEndDate:"Not entered",location:a.props.sites.length?a.props.sites[0].location:"Not entered",generator:a.props.generator.length?a.props.generator[0]:"Not entered",selectedSite:a.props.selectedSite.type,totalDieselCost:a.props.dieselCalculation.totalDieselCost||0,address:a.props.sites.length?a.props.sites[0].address:"Not entered"}).then(function(){a.setState({name:"",email:"",message:"",snackbarOpen:!0,reportBugOpen:!1,contactExpertOpen:!1})}).catch(function(e){return console.log("Error in POST:",e)})}},a}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("footer",null,r.a.createElement($e,{buttonText:"Contact Us",color:"8BC34A",title:"Please complete the following fields to send your solar estimate to a Footprint Project Representative. We will contact you soon!",state:this.state,modalOpen:this.state.contactExpertOpen,handleModalToggle:this.handleContactExpertToggle,handleChangeFor:this.handleChangeFor,handleSubmit:this.handleSubmit,handleClose:this.handleClose,subject:"Solar Estimate",id:"contact"}),r.a.createElement(Xe.a,{open:this.state.snackbarOpen,message:r.a.createElement("span",{id:"message-id"},"Email Sent"),autoHideDuration:2e3,onClose:function(){return e.setState({snackbarOpen:!1})}}))}}]),t}(n.Component),Qe=Object(l.b)(function(e){return{sites:e.sites,selectedSite:e.selectedSite,dieselCalculation:e.dieselCalculation,generator:e.generator}})(Ke),et=(a(491),function(e){function t(){var e,a;Object(Te.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(we.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(r)))).state={reportBugOpen:!1,snackbarOpen:!1,name:"",email:"",message:""},a.handleChangeFor=function(e){return function(t){a.setState(Object(Be.a)({},a.state,Object(Me.a)({},e,t.target.value)))}},a.handleReportBugToggle=function(){a.setState(Object(Be.a)({},a.state,{reportBugOpen:!a.state.reportBugOpen,contactExpertOpen:!1}))},a.handleClose=function(){return a.setState(Object(Be.a)({},a.state,{contactExpertOpen:!1,reportBugOpen:!1}))},a.handleSubmit=function(e){return function(t){t.preventDefault(),D.a.post("/email",{content:{name:a.state.name,email:a.state.email,subject:e,message:a.state.message},siteName:a.props.sites.length?a.props.sites[0].siteName:"Not entered",fundStartDate:a.props.sites.length?a.props.sites[0].fundStartDate:"Not entered",fundEndDate:a.props.sites.length?a.props.sites[0].fundEndDate:"Not entered",location:a.props.sites.length?a.props.sites[0].location:"Not entered",generator:a.props.generator.length?a.props.generator[0]:"Not entered",selectedSite:a.props.selectedSite.type,totalDieselCost:a.props.dieselCalculation.totalDieselCost||0,address:a.props.sites.length?a.props.sites[0].address:"Not entered"}).then(function(){a.setState({name:"",email:"",message:"",snackbarOpen:!0,reportBugOpen:!1})}).catch(function(e){return alert("Error in POST:",e)})}},a}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"bugReport"},r.a.createElement($e,{buttonText:"Report A Bug",color:"secondary",title:"Please complete the following fields to report a bug to the Footprint Project team.",state:this.state,modalOpen:this.state.reportBugOpen,handleModalToggle:this.handleReportBugToggle,handleChangeFor:this.handleChangeFor,handleSubmit:this.handleSubmit,handleClose:this.handleClose,subject:"Bug Report"}),r.a.createElement(Xe.a,{open:this.state.snackbarOpen,message:r.a.createElement("span",{id:"message-id"},"Email Sent"),autoHideDuration:2e3,onClose:function(){return e.setState({snackbarOpen:!1})}}))}}]),t}(n.Component)),tt=Object(l.b)(function(e){return{sites:e.sites,selectedSite:e.selectedSite,dieselCalculation:e.dieselCalculation,generator:e.generator}})(et),at=a(317),nt=a(771),rt=function(e){function t(){var e,a;Object(Te.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(we.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.login=function(e){e.preventDefault(),a.state.username&&a.state.password?(a.props.dispatch({type:"LOGIN",payload:{username:a.state.username,password:a.state.password}}),a.props.history.push("/dashboard")):a.props.dispatch({type:"LOGIN_INPUT_ERROR"})},a.handleInputChangeFor=function(e){return function(t){a.setState(Object(Me.a)({},e,t.target.value))}},a}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.errors.loginMessage&&r.a.createElement("h2",{className:"alert",role:"alert"},this.props.errors.loginMessage),r.a.createElement("form",{onSubmit:this.login},r.a.createElement("h1",null,"Login"),r.a.createElement("div",null,r.a.createElement(Ye.a,{type:"text",label:"Email",value:this.state.username,onChange:this.handleInputChangeFor("username")})),r.a.createElement("div",null,r.a.createElement(Ye.a,{type:"password",label:"Password",value:this.state.password,onChange:this.handleInputChangeFor("password")})),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(He.a,{className:"log-in",type:"submit",name:"submit",value:"Log In",size:"large",color:"primary",variant:"contained"},"Log In"))),r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement("button",{type:"button",className:"link-button",onClick:function(){e.props.dispatch({type:"SET_TO_REGISTER_MODE"})}},"Register")),r.a.createElement("div",{id:"bugSpacing"}))}}]),t}(n.Component),st=Object(nt.a)(Object(l.b)(function(e){return{errors:e.errors}})(rt)),ot=function(e){function t(){var e,a;Object(Te.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(we.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.registerUser=function(e){e.preventDefault(),a.state.username&&a.state.password?(a.props.dispatch({type:"REGISTER",payload:{username:a.state.username,password:a.state.password}}),a.props.history.push("/dashboard")):a.props.dispatch({type:"REGISTRATION_INPUT_ERROR"})},a.handleInputChangeFor=function(e){return function(t){a.setState(Object(Me.a)({},e,t.target.value))}},a}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.errors.registrationMessage&&r.a.createElement("h2",{className:"alert",role:"alert"},this.props.errors.registrationMessage),r.a.createElement("form",{onSubmit:this.registerUser},r.a.createElement("h1",null,"Register"),r.a.createElement("div",null,r.a.createElement(Ye.a,{type:"text",label:"Email",value:this.state.username,onChange:this.handleInputChangeFor("username")})),r.a.createElement("div",null,r.a.createElement(Ye.a,{type:"password",label:"Password",value:this.state.password,onChange:this.handleInputChangeFor("password")})),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(He.a,{className:"register",type:"submit",name:"submit",value:"Register",size:"large",color:"primary",variant:"contained"},"Register"))),r.a.createElement("br",null),r.a.createElement("center",null,r.a.createElement("button",{type:"button",className:"link-button",onClick:function(){e.props.dispatch({type:"SET_TO_LOGIN_MODE"})}},"Login")),r.a.createElement("div",{id:"bugSpacing"}))}}]),t}(n.Component),it=Object(nt.a)(Object(l.b)(function(e){return{errors:e.errors}})(ot)),lt=Object(l.b)(function(e){return{user:e.user,loginMode:e.loginMode}})(function(e){var t,a=e.component,n=e.user,s=e.loginMode,o=Object(at.a)(e,["component","user","loginMode"]);return t=n.id?a:"login"===s?st:it,r.a.createElement(Re.a,Object.assign({},o,{component:t}))}),ct=function(e){function t(){return Object(Te.a)(this,t),Object(we.a)(this,Object(ke.a)(t).apply(this,arguments))}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=0;return this.props.generator.map(function(t){return e+=Number(t.monthlyCost)}),r.a.createElement("div",null,"Total Monthly Energy Cost: $",e.toFixed(2))}}]),t}(n.Component),pt=Object(l.b)(function(e){return{sites:e.sites,generator:e.generator}})(ct),ut=a(81),dt=a.n(ut),ht=a(202),mt=a.n(ht),gt=a(157),Et=a.n(gt),ft=a(201),bt=a.n(ft),yt=a(102),vt=a.n(yt),St=a(103),Ot=a.n(St),Ct=a(303),jt=a.n(Ct),Tt=a(304),xt=a.n(Tt),wt=function(e){function t(){var e,a;Object(Te.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(we.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(r)))).state={hasGenerator:!1,energyUsage:{generatorSize:"",energyUnit:"",monthlyCost:""},snackbarOpen:!1},a.handleHasGeneratorToggle=function(){a.setState({hasGenerator:!a.state.hasGenerator,energyUsage:{generatorSize:"",energyUnit:"",monthlyCost:""}})},a.handleChangeFor=function(e){return function(t){a.setState(Object(Be.a)({},a.state,{energyUsage:Object(Be.a)({},a.state.energyUsage,Object(Me.a)({},e,t.target.value))}))}},a.handleAddEnergyUsage=function(e){e.preventDefault(),a.props.dispatch({type:"ADD_GENERATOR",payload:a.state.energyUsage}),a.setState({energyUsage:{generatorSize:"",energyUnit:"",monthlyCost:""},snackbarOpen:!0})},a}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(bt.a,{htmlFor:this.state.hasGenerator.toString()},"Do you currently have a generator?  "),r.a.createElement(jt.a,{control:r.a.createElement(xt.a,{checked:this.state.hasGenerator,onChange:this.handleHasGeneratorToggle,value:"hasGenerator",color:"primary"}),label:this.state.hasGenerator?"Yes":"No"})),r.a.createElement("br",null),this.state.hasGenerator&&r.a.createElement(r.a.Fragment,null,r.a.createElement(vt.a,{style:{margin:10}},r.a.createElement(dt.a,{type:"text",placeholder:"Enter Load Size",value:this.state.energyUsage.generatorSize,onChange:this.handleChangeFor("generatorSize")}),r.a.createElement(Ot.a,null,"Generator Size")),r.a.createElement(vt.a,{style:{margin:10}},r.a.createElement(mt.a,{value:this.state.energyUsage.energyUnit,onChange:this.handleChangeFor("energyUnit")},r.a.createElement(Et.a,{value:"",disabled:!0},"--Select Energy Unit--"),r.a.createElement(Et.a,{value:"kVA"},"kVA"),r.a.createElement(Et.a,{value:"kW"},"kW")),r.a.createElement(Ot.a,null,"Generator Energy Unit")),r.a.createElement("br",null),r.a.createElement(vt.a,{style:{margin:10}},r.a.createElement(dt.a,{type:"text",placeholder:"USD $",value:this.state.energyUsage.monthlyCost,onChange:this.handleChangeFor("monthlyCost")}),r.a.createElement(Ot.a,null,"Monthly Fuel Cost")),r.a.createElement(He.a,{variant:"contained",color:"primary",onClick:this.handleAddEnergyUsage},"Add Generator"),this.props.generator.length>0&&r.a.createElement(pt,null)),!this.state.hasGenerator&&r.a.createElement(r.a.Fragment,null,r.a.createElement(vt.a,{style:{margin:10}},r.a.createElement(dt.a,{type:"text",placeholder:"USD $",value:this.state.energyUsage.monthlyCost,onChange:this.handleChangeFor("monthlyCost")}),r.a.createElement(Ot.a,null,"Total Monthly Energy Budget")),r.a.createElement(He.a,{variant:"contained",color:"primary",onClick:this.handleAddEnergyUsage,classes:{label:t.label}},"Add Monthly Energy Budget"),this.props.generator.length>0&&r.a.createElement(pt,null)),r.a.createElement(Xe.a,{open:this.state.snackbarOpen,message:r.a.createElement("span",{id:"message-id"},"Energy Budget Added"),autoHideDuration:2e3,onClose:function(){return e.setState({snackbarOpen:!1})}}))}}]),t}(n.Component),kt=Object(Fe.withStyles)({label:{textTransform:"capitalize"}})(Object(l.b)(function(e){return{sites:e.sites,generator:e.generator}})(wt)),_t=a(69),Nt=a.n(_t),Dt=a(71),It=a.n(Dt),Rt=a(70),Pt=a.n(Rt),Lt=function(e){function t(){return Object(Te.a)(this,t),Object(we.a)(this,Object(ke.a)(t).apply(this,arguments))}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:"toolTip"},r.a.createElement("span",{className:"toolTipText"},this.props.site.description),r.a.createElement(Nt.a,{className:t.card},r.a.createElement(Pt.a,null,r.a.createElement(Ge.a,null,this.props.icon),r.a.createElement(Ge.a,{variant:"h6"},r.a.createElement("strong",null,this.props.site.type)),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("p",{className:"siteDescription"},"Power Needs: ",this.props.site.power_need," kWh/day"),r.a.createElement("p",{className:"siteDescription"},"Panel Array: ",this.props.site.solar_panel," kW"),r.a.createElement("p",{className:"siteDescription"},"Storage: ",this.props.site.battery_bank," kWh"),this.props.site.generator?r.a.createElement("p",{className:"siteDescription"},"Generator: ",this.props.site.generator," kW"):r.a.createElement("p",{className:"siteDescription"},"Generator: None"))),r.a.createElement(It.a,null,r.a.createElement("div",{className:t.button},r.a.createElement(He.a,{size:"large",variant:"outlined",color:"primary",onClick:function(){return e.props.selectSite(e.props.site)}},"Select This Site"))),r.a.createElement("br",null)))}}]),t}(n.Component),At=Object(Fe.withStyles)({card:{marginTop:15,width:260,height:335,textAlign:"center",backgroundColor:"AliceBlue"},icon:{margin:2,fontSize:50,textAlign:"center"},button:{width:"100%",margin:"auto"}})(Lt),Mt=a(93),Bt=a.n(Mt),Ft=a(97),Ut=a.n(Ft),Gt=a(99),zt=a.n(Gt),Wt=a(95),Jt=a.n(Wt),Ht=function(e){function t(){return Object(Te.a)(this,t),Object(we.a)(this,Object(ke.a)(t).apply(this,arguments))}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement(Nt.a,{className:t.card,style:this.props.color},r.a.createElement(Pt.a,null,r.a.createElement(Ge.a,null,this.props.icon),r.a.createElement(Ge.a,{variant:"h5"},this.props.title)),r.a.createElement(It.a,null,r.a.createElement("div",{className:t.button},r.a.createElement(He.a,{size:"large",variant:"outlined",color:"primary",onClick:function(){e.props.selectSiteCategory(e.props.title),e.props.toggleColor()}},"Select"))),r.a.createElement("br",null)))}}]),t}(n.Component),qt=Object(Fe.withStyles)({card:{marginTop:20,width:260,height:210,textAlign:"center"},button:{width:"100%",margin:"auto"}})(Ht),Yt=a(94),Zt=a.n(Yt),$t=a(96),Vt=a.n($t),Xt=a(98),Kt=a.n(Xt),Qt=a(100),ea=a.n(Qt),ta=function(e){function t(){var e,a;Object(Te.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(we.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(r)))).state={active:null},a.toggleColor=function(e){a.state.active===e?a.setState({active:null}):a.setState({active:e})},a.myColor=function(e){return a.state.active===e?"MediumAquaMarine":""},a}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=r.a.createElement(Bt.a,{className:t.icon}),n=r.a.createElement(Zt.a,{className:t.icon}),s=r.a.createElement(Jt.a,{className:t.icon}),o=r.a.createElement(Vt.a,{className:t.icon}),i=r.a.createElement(Ut.a,{className:t.icon}),l=r.a.createElement(Kt.a,{className:t.icon}),c=r.a.createElement(zt.a,{className:t.icon}),p=r.a.createElement(ea.a,{className:t.icon});return r.a.createElement("div",{className:t.cardDiv},r.a.createElement(qt,{icon:a,title:"Health",selectSiteCategory:this.props.selectSiteCategory,color:{background:this.myColor(0)},toggleColor:function(){e.toggleColor(0)}}),r.a.createElement(qt,{icon:n,title:"Water",selectSiteCategory:this.props.selectSiteCategory,color:{background:this.myColor(1)},toggleColor:function(){e.toggleColor(1)}}),r.a.createElement(qt,{icon:s,title:"Comms",selectSiteCategory:this.props.selectSiteCategory,color:{background:this.myColor(2)},toggleColor:function(){e.toggleColor(2)}}),r.a.createElement(qt,{icon:o,title:"Ops",selectSiteCategory:this.props.selectSiteCategory,color:{background:this.myColor(3)},toggleColor:function(){e.toggleColor(3)}}),r.a.createElement(qt,{icon:l,title:"Shelter",selectSiteCategory:this.props.selectSiteCategory,color:{background:this.myColor(4)},toggleColor:function(){e.toggleColor(4)}}),r.a.createElement(qt,{icon:c,title:"Food",selectSiteCategory:this.props.selectSiteCategory,color:{background:this.myColor(5)},toggleColor:function(){e.toggleColor(5)}}),r.a.createElement(qt,{icon:i,title:"Admin",selectSiteCategory:this.props.selectSiteCategory,color:{background:this.myColor(6)},toggleColor:function(){e.toggleColor(6)}}),r.a.createElement(qt,{icon:p,title:"Logs",selectSiteCategory:this.props.selectSiteCategory,color:{background:this.myColor(7)},toggleColor:function(){e.toggleColor(7)}}))}}]),t}(n.Component),aa=Object(Fe.withStyles)({icon:{fontSize:70,textAlign:"center"},cardDiv:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-evenly"}})(ta),na=a(153),ra="2014-12-30T18:06:17.762Z",sa="2020-01-05T18:06:17.762Z",oa=function(e){function t(){var e,a;Object(Te.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(we.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,contactExpertOpen:!1,snackbarOpen:!1,name:"",email:"",message:""},a.handleChange=function(e){return function(t){return a.setState(Object(Me.a)({},e,t.target.value))}},a.handleContactExpertToggle=function(){a.setState(Object(Be.a)({},a.state,{contactExpertOpen:!a.state.contactExpertOpen,reportBugOpen:!1}))},a.handleClose=function(){return a.setState(Object(Be.a)({},a.state,{contactExpertOpen:!1,reportBugOpen:!1}))},a.handleSubmit=function(e){return function(t){t.preventDefault(),D.a.post("/email",{content:{name:a.state.name,email:a.state.email,subject:e,message:a.state.message},siteName:a.props.sites.length?a.props.sites[0].siteName:"Not entered",fundStartDate:a.props.sites.length?a.props.sites[0].fundStartDate:"Not entered",fundEndDate:a.props.sites.length?a.props.sites[0].fundEndDate:"Not entered",location:a.props.sites.length?a.props.sites[0].location:"Not entered",generator:a.props.generator.length?a.props.generator[0]:"Not entered",selectedSite:a.props.selectedSite.type,totalDieselCost:a.props.dieselCalculation.totalDieselCost||0,address:a.props.sites.length?a.props.sites[0].address:"Not entered"}).then(function(){a.setState({name:"",email:"",message:"",snackbarOpen:!0,reportBugOpen:!1,contactExpertOpen:!1})}).catch(function(e){return console.log("Error in POST:",e)})}},a}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=[{label:"Time to cover initial solar grid investment",data:[{x:this.props.sites.length?new Date(this.props.sites[0].fundStartDate):ra,y:this.props.selectedSite.total_price||25e3},{x:this.props.dieselCalculation.payOffDate,y:0}],backgroundColor:this.props.dieselCalculation.payOffInTime?["rgb(0,0,255,0.7)"]:["#DC143C"],borderColor:["rgb(0,0,255)"],borderWidth:1},{label:"Solar energy savings",data:[{x:this.props.dieselCalculation.payOffInTime?this.props.dieselCalculation.payOffDate:new Date(this.props.sites[0].fundStartDate),y:0},{x:this.props.sites.length?this.props.sites[0].fundEndDate:sa,y:this.props.dieselCalculation.payOffInTime?this.props.dieselCalculation.totalDieselCost-this.props.selectedSite.total_price:0}],backgroundColor:["#228b22"],borderColor:["#228b22"],borderWidth:1},{label:"Cost of Diesel",data:[{x:this.props.sites.length?this.props.sites[0].fundStartDate:ra,y:0},{x:this.props.sites.length?this.props.sites[0].fundEndDate:sa,y:this.props.dieselCalculation.totalDieselCost||35e3}],backgroundColor:["rgb(128,128,128,0.7)"],borderColor:["grey"],borderWidth:1}];return r.a.createElement("div",null,r.a.createElement("h2",{className:"heading"},"Results"),this.props.dieselCalculation.payOffInTime&&r.a.createElement("div",{className:"center"},r.a.createElement("h2",{style:{color:"LimeGreen"}},"Total Savings: $",parseInt(this.props.dieselCalculation.totalDieselCost-this.props.selectedSite.total_price).toLocaleString())),r.a.createElement("div",{style:{maxWidth:"65%",margin:"auto"}},r.a.createElement(na.a,{data:{datasets:a},options:{scales:{xAxes:[{type:"time",unitStepSize:1,time:{unit:"year",suggestedMax:"2020-01-05T18:06:17.762Z",suggestedMin:"2014-12-30T18:06:17.762Z"},distribution:"linear",scaleLabel:{display:!0,labelString:"Project Timeline",fontSize:22}}],yAxes:[{scaleLabel:{display:!0,labelString:"Energy Costs",fontSize:22}}]}},ref:"linegraph"})),this.props.dieselCalculation.payOffInTime?r.a.createElement("div",{className:"center",style:{color:"LimeGreen"}},r.a.createElement("h3",null,"Time to pay off: ",r.a.createElement("strong",{style:{color:"MediumTurquoise"}},parseInt(this.props.dieselCalculation.timeToPayOff)," months")),r.a.createElement("h3",null,"Total Savings: ",r.a.createElement("strong",{style:{color:"MediumTurquoise"}},"$",parseInt(this.props.dieselCalculation.totalDieselCost-this.props.selectedSite.total_price).toLocaleString())),r.a.createElement("h3",null,"Jobs Created: ",r.a.createElement("strong",{style:{color:"MediumTurquoise"}},this.props.selectedSite.jobs_created)),r.a.createElement("h3",null,"Total Co2 Saved: ",r.a.createElement("strong",{style:{color:"MediumTurquoise"}},this.props.selectedSite.co2_saved.toLocaleString()," lbs"))):r.a.createElement("h3",{className:"center",style:{color:"DarkRed"}},"Monthly Budget Needed To Pay Off In Time: $",parseInt(this.props.selectedSite.total_price/this.props.dieselCalculation.timeline).toLocaleString()),r.a.createElement("br",null),r.a.createElement("div",{className:"center"},this.props.user.id&&this.props.selectedSite.id&&r.a.createElement(He.a,{value:"submit",type:"submit",variant:"contained",color:"primary",classes:{label:t.label},className:t.button,onClick:this.props.addSiteToProject},r.a.createElement("span",{styles:{fontSize:"40vw"}},"Add to Project")),r.a.createElement($e,{buttonText:"Contact the Experts",color:"primary",title:"Please complete the following fields to send your solar estimate to a Footprint Project Representative. We will contact you soon!",state:this.state,modalOpen:this.state.contactExpertOpen,handleModalToggle:this.handleContactExpertToggle,handleChangeFor:this.handleChange,handleSubmit:this.handleSubmit,handleClose:this.handleClose,subject:"Solar Estimate",classes:{label:t.label}})),r.a.createElement("div",{className:"subHeading"},r.a.createElement("p",null,'This is an estimate of the costs/benefits of using solar power at your site. There are purchase, lease, and renting options available. Please click the "Contact The Experts" button to send your estimate and email address to a Footprint Project representative. We will contact promptly with more details and information about how to make your project sustainable!')),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Xe.a,{open:this.state.snackbarOpen,message:r.a.createElement("span",{id:"message-id"},"Email Sent"),autoHideDuration:2e3,onClose:function(){return e.setState({snackbarOpen:!1})}}))}}]),t}(n.Component),ia=Object(Fe.withStyles)({label:{textTransform:"capitalize",fontSize:25}})(Object(l.b)(function(e){return{sites:e.sites,selectedSite:e.selectedSite,dieselCalculation:e.dieselCalculation,generator:e.generator,project_id:e.projectId,user:e.user}})(oa)),la=a(82),ca=a.n(la),pa=function(e){function t(){var e,a;Object(Te.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(we.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(s)))).state={icon:"",snackbarOpen:!1},a.selectSite=function(e){a.props.dispatch({type:"SET_SELECTED_SITE",payload:e}),setTimeout(function(){return ca()(a.results,{offset:0,align:"top",duration:750})},200),a.setState(Object(Be.a)({},a.state,{snackbarOpen:!0}))},a.selectSiteCategory=function(e){a.props.dispatch({type:"FETCH_SITE_TYPES",payload:e}),a.setState({icon:a.chooseIcon(e)}),setTimeout(function(){return ca()(a.siteTypeItem,{offset:0,align:"top",duration:750})},200)},a.chooseIcon=function(e){switch(e){case"Health":return r.a.createElement(Bt.a,null);case"Water":return r.a.createElement(Zt.a,null);case"Comms":return r.a.createElement(Jt.a,null);case"Ops":return r.a.createElement(Vt.a,null);case"Shelter":return r.a.createElement(Kt.a,null);case"Food":return r.a.createElement(zt.a,null);case"Admin":return r.a.createElement(Ut.a,null);case"Logs":return r.a.createElement(ea.a,null);default:return null}},a}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement("h2",{className:"heading"},"Select Site Category"),r.a.createElement("h3",{className:"subHeading"},"Scroll down to see site type options"),r.a.createElement("div",null,r.a.createElement(aa,{selectSiteCategory:this.selectSiteCategory})),r.a.createElement("section",{className:"siteTypeItem",ref:function(t){e.siteTypeItem=t}},r.a.createElement("div",{className:t.card},this.props.siteTypes.map(function(t){return r.a.createElement(At,{site:t,key:t.id,selectSite:e.selectSite,icon:e.state.icon})}))),r.a.createElement("br",null),r.a.createElement("br",null),this.props.selectedSite.id&&r.a.createElement("section",{className:"results",ref:function(t){e.results=t}},r.a.createElement(ia,{addSiteToProject:this.props.addSiteToProject})),r.a.createElement("div",null,r.a.createElement(Xe.a,{open:this.state.snackbarOpen,message:r.a.createElement("span",{id:"message-id"},"Site Selected"),autoHideDuration:2e3,onClose:function(){return e.setState({snackbarOpen:!1})}})))}}]),t}(n.Component),ua=Object(Fe.withStyles)({card:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-evenly",margin:10}})(Object(l.b)(function(e){return{siteTypes:e.siteTypes,selectedSite:e.selectedSite}})(pa)),da=a(48),ha=a(154),ma=a(155),ga=a.n(ma),Ea=function(e){function t(){var e,a;Object(Te.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(we.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(r)))).state={bounds:null,center:{lat:40,lng:45},isMarkerShown:!1,showInfoWindow:!1,activeMarker:{},selectedPlace:{},windowPosition:null,mapClicked:!1},a.delayedShowMarker=function(){setTimeout(function(){a.setState({isMarkerShown:!0})},3e3)},a}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"componentWillMount",value:function(){var e=this,t={};this.setState({bounds:null,center:{lat:40,lng:45},markers:[],onMapMounted:function(e){t.map=e},onBoundsChanged:function(){e.setState({bounds:t.map.getBounds(),center:t.map.getCenter()})},onSearchBoxMounted:function(e){t.searchBox=e},onPlacesChanged:function(){var a=t.searchBox.getPlaces(),n=new google.maps.LatLngBounds;a.forEach(function(e){e.geometry.viewport?n.union(e.geometry.viewport):n.extend(e.geometry.location)});var r=a.map(function(e){return{position:e.geometry.location}}),s=ga.a.get(r,"0.position",e.state.center);e.setState({center:s,markers:r}),t.map.fitBounds(n)}})}},{key:"componentDidMount",value:function(){this.delayedShowMarker()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(da.GoogleMap,{ref:this.state.onMapMounted,defaultZoom:2.2,center:this.state.center,onClick:this.props.handleClick,onBoundsChanged:this.props.onBoundsChanged,defaultOptions:{streetViewControl:!1,scaleControl:!1,mapTypeControl:!1,panControl:!1,rotateControl:!1,fullscreenControl:!1}},r.a.createElement(ha.SearchBox,{ref:this.state.onSearchBoxMounted,bounds:this.state.bounds,controlPosition:google.maps.ControlPosition.TOP_LEFT,onPlacesChanged:this.state.onPlacesChanged},r.a.createElement("input",{type:"text",placeholder:"Enter Site Location",style:{boxSizing:"border-box",border:"1px solid transparent",width:"80%",height:"6%",marginTop:"5%",marginLeft:"10%",padding:"0 12px",borderRadius:"3px",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.3)",fontSize:"2vmin",outline:"none",textOverflow:"ellipses"}})),this.props.mapClicked&&r.a.createElement(da.Marker,{position:this.props.location})))}}]),t}(r.a.Component),fa=Object(l.b)(function(e){return{state:e}})(Object(da.withScriptjs)(Object(da.withGoogleMap)(Ea))),ba=a(204),ya=a.n(ba);a(757);ya.a.setApiKey("AIzaSyCZv9A4Vtnra6r04z9JnNk91zeXwX82O68");var va=function(e){function t(){var e,a;Object(Te.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(we.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(r)))).state={siteName:"",fundStartDate:"",fundEndDate:"",location:{lat:0,lng:0},mapClicked:!1,address:""},a.handleClick=function(e){a.setState({location:{lat:e.latLng.lat(),lng:e.latLng.lng()},mapClicked:!0}),ya.a.fromLatLng(a.state.location.lat,a.state.location.lng).then(function(e){var t=e.results[0].formatted_address;a.setState({address:t})},function(e){console.error(e),alert("There was an error, please refresh or contact us")})},a.handleToggleOpen=function(){a.setState({isOpen:!a.state.isOpen})},a.handleChange=function(e){return function(t){a.setState(Object(Be.a)({},a.state,Object(Me.a)({},e,t.target.value)))}},a.handleSubmit=function(e){e.preventDefault(),a.props.dispatch({type:"ADD_SITE",payload:Object(Be.a)({},a.state,{siteGenerators:a.props.generator})}),setTimeout(function(){return ca()(a.siteTypeList,{offset:0,align:"top",duration:750})},200)},a.addSiteToProject=function(){a.props.dispatch({type:"ADD_SITE_TO_PROJECT",payload:{state:a.state,project_id:a.props.project_id,site_type_id:a.props.selectedSite.id,generators:a.props.generator,energy_budget:a.props.generator.map(function(e){return parseInt(e.monthlyCost)}).reduce(function(e,t){return e+t})}}),a.props.dispatch({type:"CLEAR_FORM"})},a.componentWillReceiveProps=function(e){e.sitesByProject.length>a.props.sitesByProject.length&&(a.props.history.push("/project"),console.log("Tried to push to project view!"))},a}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement("h2",{className:"heading"},"Transition Tool"),r.a.createElement("div",{className:"subHeading"},r.a.createElement("h3",null,"This tool is for users with off-grid power needs who are exploring on-site solar plus storage. Based on the length of your project, monthly power budgets and site electrical loads, solar plus storage may be the right option for you!")),r.a.createElement("div",{className:"siteForm"},r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h4",{id:"siteFormHeader"},"Enter Site Information"),r.a.createElement("div",null,r.a.createElement(Ye.a,{id:"standard-name",label:"Site Name",className:t.textField,value:this.state.siteName,required:!0,onChange:this.handleChange("siteName"),margin:"normal"})),r.a.createElement("br",null),r.a.createElement(Ye.a,{id:"date",label:"Funding Start Date",type:"date",onChange:this.handleChange("fundStartDate"),className:t.textField,value:this.state.fundStartDate,InputLabelProps:{shrink:!0},required:!0}),r.a.createElement(Ye.a,{id:"date",label:"Funding End Date",type:"date",onChange:this.handleChange("fundEndDate"),className:t.textField,value:this.state.fundEndDate,InputLabelProps:{shrink:!0},required:!0}),r.a.createElement("div",{className:"map"},r.a.createElement("h4",null,"Search by Country and click on map below to set site location."),r.a.createElement("h4",null,"Latitude: ",this.state.location.lat," ",r.a.createElement("br",null)," Longitude: ",this.state.location.lng),r.a.createElement(fa,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyCZv9A4Vtnra6r04z9JnNk91zeXwX82O68&v=3.exp&libraries=geometry,drawing,places",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"80vmin",width:"80vmin",margin:"auto"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),isMarkerShown:this.state.isMarkerShown,onMarkerClick:this.handleMarkerClick,handleToggleOpen:this.handleToggleOpen,isOpen:this.state.isOpen,onClick:this.handleClick,location:this.state.location,handleClick:this.handleClick,mapClicked:this.state.mapClicked})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(kt,null),r.a.createElement("br",null),r.a.createElement("br",null),this.props.generator.length>0&&r.a.createElement(He.a,{value:"submit",type:"submit",variant:"contained",color:"primary",className:t.button},"Choose Site Type"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),this.props.sites.length>0&&r.a.createElement("section",{className:"siteTypeList",ref:function(t){e.siteTypeList=t}},r.a.createElement(ua,{addSiteToProject:this.addSiteToProject})))}}]),t}(n.Component),Sa=Object(Fe.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing.unit},button:{margin:e.spacing.unit},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200}}})(Object(l.b)(function(e){return{sites:e.sites,sitesByProject:e.sitesByProject,generator:e.generator,selectedSite:e.selectedSite,project_id:e.projectId,user:e.user}})(va)),Oa=(a(759),function(e){function t(){var e,a;Object(Te.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(we.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(r)))).state={energy_budget:a.props.energy_budget,editing:!1,new_budget:0,fundStartDate:"",fundEndDate:"",siteName:"",fundStartDateTemp:"",fundEndDateTemp:""},a.componentWillReceiveProps=function(e){0===e.energy_budget&&a.setState({energy_budget:0})},a.handleChange=function(e){return function(t){a.setState(Object(Me.a)({},e,t.target.value))}},a}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.props.sites[this.props.index],n=this.props.allSiteTypes[a.site_type_id-1].total_price,s=this.state.energy_budget?this.state.energy_budget:a.energy_budget,o=this.state.fundStartDate||a.start_date,i=this.state.fundEndDate||a.end_date,l=y()(o).add(n/s,"months"),c=y()(i).diff(y()(o),"months"),p=[{label:"Time to cover initial solar grid investment",data:[{x:y()(o),y:n},{x:l,y:0}],backgroundColor:l.isBefore(y()(i))?["rgb(0,0,255,0.7)"]:["#DC143C"],borderColor:["rgb(0,0,255)"],borderWidth:1},{label:"Solar energy savings",data:[{x:l.isBefore(y()(i))?l:y()(o),y:0},{x:y()(i),y:l.isBefore(y()(i))?s*c-n:0}],backgroundColor:["#228b22"],borderColor:["#228b22"],borderWidth:1},{label:"Cost of Diesel",data:[{x:o,y:0},{x:i,y:s*c}],backgroundColor:["rgb(128,128,128,0.7)"],borderColor:["grey"],borderWidth:1}];return r.a.createElement("div",null,r.a.createElement("h2",{className:"heading",style:{marginBottom:"2vmin",paddingTop:"5vmin",fontSize:"xx-large"}},a.site_name),r.a.createElement("div",{style:{textAlign:"center",borderBottom:"1px solid black",paddingBottom:"10px"}},this.state.editing?r.a.createElement("div",null,r.a.createElement(Ye.a,{id:"date",label:"Funding Start Date",type:"date",onChange:this.handleChange("fundStartDateTemp"),className:t.textField,value:this.state.fundStartDateTemp?this.state.fundStartDateTemp:new Date(o).toISOString().substr(0,10),InputLabelProps:{shrink:!0}}),r.a.createElement(Ye.a,{label:"Funding End Date",type:"date",onChange:this.handleChange("fundEndDateTemp"),className:t.textField,value:this.state.fundEndDateTemp?this.state.fundEndDateTemp:new Date(i).toISOString().substr(0,10),InputLabelProps:{shrink:!0}}),r.a.createElement("span",null,r.a.createElement(Ye.a,{label:"Monthly Energy Budget",className:t.textField,value:this.state.new_budget?this.state.new_budget:s,onChange:this.handleChange("new_budget"),margin:"normal",style:{marginTop:"0px"}}),r.a.createElement(He.a,{color:"primary",variant:"outlined",onClick:function(){return e.setState({energy_budget:e.state.new_budget,fundStartDate:e.state.fundStartDateTemp,fundEndDate:e.state.fundEndDateTemp})}},"Reset Chart"),r.a.createElement(He.a,{color:"primary",variant:"outlined",onClick:function(){e.setState({editing:!1})}},"Save Changes"))):r.a.createElement("div",{style:{color:"black",display:"inline",fontSize:"x-large"}},r.a.createElement("span",{style:{paddingLeft:"10vmin"}},r.a.createElement("strong",{style:{color:"blue"}},"Start Date: ",new Date(o).toDateString())," "),r.a.createElement("span",{style:{paddingLeft:"10vmin"}},r.a.createElement("strong",{style:{color:"blue"}},"End Date: ",new Date(i).toDateString())," "),r.a.createElement("span",{style:{paddingLeft:"10vmin"}},r.a.createElement("strong",{style:{color:"blue"}},"Monthly Energy Budget: $",s.toLocaleString())," "),r.a.createElement(He.a,{color:"primary",variant:"outlined",size:"medium",onClick:function(){return e.setState({editing:!e.state.editing})}},"Edit"))),r.a.createElement("div",{style:{display:"inline-block",width:"100%",paddingTop:"3vmin"}},r.a.createElement("div",{style:{float:"left",width:"30%",color:"LimeGreen",paddingLeft:"8vmin"}},r.a.createElement("div",{className:"leftAlign"},r.a.createElement("h2",null,"Site Type: ",r.a.createElement("strong",{style:{color:"MediumTurquoise"}},this.props.allSiteTypes[a.site_type_id-1].type)),r.a.createElement("h3",null,a.generators[0].size&&r.a.createElement("h3",{id:"generators"},"Generators: ",r.a.createElement("strong",{style:{color:"MediumTurquoise"}}," ",a.generators.map(function(e,t){return r.a.createElement("span",{key:t},e.size," ",e.unit," ")})))),l.isBefore(y()(i))?r.a.createElement("div",null,r.a.createElement("h2",null,"Time to pay off: ",r.a.createElement("strong",{style:{color:"MediumTurquoise"}},parseInt(y()(l).diff(o,"months"))," months")),r.a.createElement("h2",null,"Total Savings: ",r.a.createElement("strong",{style:{color:"MediumTurquoise"}},"$",parseInt(s*c-n).toLocaleString())),r.a.createElement("h2",null,"Jobs Created: ",r.a.createElement("strong",{style:{color:"MediumTurquoise"}},this.props.allSiteTypes[a.site_type_id-1].jobs_created)),r.a.createElement("h2",null,"Total Co2 Saved: ",r.a.createElement("strong",{style:{color:"MediumTurquoise"}},this.props.allSiteTypes[a.site_type_id-1].co2_saved.toLocaleString()," lbs"))):r.a.createElement("h3",{className:"center",style:{color:"DarkRed"}},"Monthly Budget Needed To Pay Off In Time: $",parseInt(n/c).toLocaleString()),r.a.createElement("br",null),r.a.createElement("br",null))),r.a.createElement("div",{style:{width:"65%",minHeight:"50%",float:"right"}},r.a.createElement(na.a,{data:{datasets:p},options:{scales:{xAxes:[{type:"time",unitStepSize:1,time:{unit:"year",suggestedMax:"2020-01-05T18:06:17.762Z",suggestedMin:"2014-12-30T18:06:17.762Z"},distribution:"linear",scaleLabel:{display:!0,labelString:"Project Timeline",fontSize:22}}],yAxes:[{scaleLabel:{display:!0,labelString:"Energy Costs",fontSize:22}}]}}}))))}}]),t}(n.Component)),Ca=Object(Fe.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing.unit},button:{margin:e.spacing.unit},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200}}})(Object(l.b)(function(e){return{sites:e.sitesByProject,siteTypes:e.siteTypes,allSiteTypes:e.allSiteTypes,dieselCalculation:e.dieselCalculation,generator:e.generator}})(Oa)),ja=a(307),Ta=a.n(ja),xa=a(308),wa=a.n(xa),ka=a(309),_a=a.n(ka),Na=a(310),Da=a.n(Na),Ia=a(311),Ra=a.n(Ia),Pa=a(312),La=a.n(Pa),Aa=a(313),Ma=a.n(Aa),Ba=a(314),Fa=a.n(Ba),Ua=function(e){function t(){var e,a;Object(Te.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(we.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1},a.handleToggleOpen=function(){a.setState({isOpen:!a.state.isOpen})},a.chooseIcon=function(e){switch(e){case"Health":return Ta.a;case"Water":return Fa.a;case"Comms":return Ra.a;case"Ops":return La.a;case"Shelter":return _a.a;case"Food":return Da.a;case"Admin":return wa.a;case"Logs":return Ma.a;default:return null}},a}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(da.Marker,{optimized:"false",position:this.props.position,onClick:function(){return e.props.selectSite(e.props.index)},icon:{url:this.chooseIcon(this.props.image),size:{width:60,height:100},anchor:{x:15,y:50},scaledSize:{width:30,height:30}}})}}]),t}(n.Component),Ga=Object(nt.a)(Object(l.b)(function(e){return{state:e}})(Ua)),za=function(e){function t(){var e,a;Object(Te.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(we.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(r)))).state={bounds:null,center:{lat:40,lng:45},isMarkerShown:!1,showInfoWindow:!1,activeMarker:{},selectedPlace:{},windowPosition:null,mapClicked:!1},a.delayedShowMarker=function(){setTimeout(function(){a.setState({isMarkerShown:!0})},3e3)},a}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"componentWillMount",value:function(){var e=this,t={};this.setState({bounds:null,center:{lat:Number(this.props.sitesByProject[0].latitude),lng:Number(this.props.sitesByProject[0].longitude)},markers:[],onMapMounted:function(e){t.map=e},onBoundsChanged:function(){e.setState({bounds:t.map.getBounds(),center:t.map.getCenter()})},onSearchBoxMounted:function(e){t.searchBox=e},onPlacesChanged:function(){var a=t.searchBox.getPlaces(),n=new google.maps.LatLngBounds;a.forEach(function(e){e.geometry.viewport?n.union(e.geometry.viewport):n.extend(e.geometry.location)});var r=a.map(function(e){return{position:e.geometry.location}}),s=ga.a.get(r,"0.position",e.state.center);e.setState({center:s,markers:r}),t.map.fitBounds(n)}})}},{key:"componentDidMount",value:function(){this.delayedShowMarker()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(da.GoogleMap,{ref:this.state.onMapMounted,defaultZoom:5.5,center:this.state.center,onClick:this.props.handleClick,onBoundsChanged:this.props.onBoundsChanged,defaultOptions:{streetViewControl:!1,scaleControl:!1,mapTypeControl:!1,panControl:!1,rotateControl:!1,fullscreenControl:!1}},r.a.createElement(ha.SearchBox,{ref:this.state.onSearchBoxMounted,bounds:this.state.bounds,controlPosition:google.maps.ControlPosition.TOP_LEFT,onPlacesChanged:this.state.onPlacesChanged},r.a.createElement("input",{type:"text",placeholder:"Enter Site Location",style:{boxSizing:"border-box",border:"1px solid transparent",width:"80%",height:"6%",marginTop:"5%",marginLeft:"10%",padding:"0 12px",borderRadius:"3px",boxShadow:"0 2px 6px rgba(0, 0, 0, 0.3)",fontSize:"2vmin",outline:"none",textOverflow:"ellipses"}})),this.props.sitesByProject.map(function(t,a){return r.a.createElement(Ga,{key:a,position:{lat:Number(t.latitude),lng:Number(t.longitude)},selectSite:e.props.selectSite,index:a,image:e.props.allSiteTypes[t.site_type_id-1].category})})))}}]),t}(r.a.Component),Wa=Object(l.b)(function(e){return{state:e,sitesByProject:e.sitesByProject,allSiteTypes:e.allSiteTypes}})(Object(da.withScriptjs)(Object(da.withGoogleMap)(za))),Ja=function(e){function t(){var e,a;Object(Te.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(a=Object(we.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(s)))).state={currentIndex:-1,icon:""},a.selectSite=function(e){a.setState({currentIndex:e}),setTimeout(function(){return ca()(a.siteSelect,{offset:0,align:"top",duration:750})},200)},a.chooseIcon=function(e){switch(e){case"Health":return r.a.createElement(Bt.a,{style:{width:"10vmin",height:"10vmin"}});case"Water":return r.a.createElement(Zt.a,{style:{width:"10vmin",height:"10vmin"}});case"Comms":return r.a.createElement(Jt.a,{style:{width:"10vmin",height:"10vmin"}});case"Ops":return r.a.createElement(Vt.a,{style:{width:"10vmin",height:"10vmin"}});case"Shelter":return r.a.createElement(Kt.a,{style:{width:"10vmin",height:"10vmin"}});case"Food":return r.a.createElement(zt.a,{style:{width:"10vmin",height:"10vmin"}});case"Admin":return r.a.createElement(Ut.a,{style:{width:"10vmin",height:"10vmin"}});case"Logs":return r.a.createElement(ea.a,{style:{width:"10vmin",height:"10vmin"}});default:return null}},a.handleAddSite=function(){a.props.history.push("/add_site")},a}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"FETCH_ALL_SITE_TYPES"}),this.setState({icon:this.chooseIcon("Health")}),window.scrollTo(0,0)}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement("div",null,this.props.project.length?r.a.createElement("div",null,r.a.createElement("h1",{className:"heading"},this.props.project[0].name,r.a.createElement("pre",null,r.a.createElement(He.a,{onClick:this.handleAddSite,size:"medium",variant:"contained",color:"primary"},"Add Site")))):r.a.createElement("p",null,"loading..."),this.props.sitesByProject.length?r.a.createElement("div",null,r.a.createElement("div",{className:t.cardDiv},this.props.sitesByProject.map(function(a,n){return r.a.createElement(Nt.a,{className:t.card,key:n},r.a.createElement(Pt.a,null,r.a.createElement(Ge.a,{variant:"h4"},e.chooseIcon(e.props.allSiteTypes[a.site_type_id-1].category),r.a.createElement("br",null)),r.a.createElement(Ge.a,{variant:"h6"},a.site_name),r.a.createElement(Ge.a,null,"Energy Budget: \xa0 ",a.energy_budget)),r.a.createElement(It.a,null,r.a.createElement("div",{className:t.button},r.a.createElement(He.a,{size:"large",variant:"outlined",color:"secondary",onClick:function(){return e.selectSite(n)}},"Select Site"))))}),r.a.createElement("div",null,r.a.createElement(Wa,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyCZv9A4Vtnra6r04z9JnNk91zeXwX82O68&v=3.exp&libraries=geometry,drawing,places",loadingElement:r.a.createElement("div",{style:{height:"100%"}}),containerElement:r.a.createElement("div",{style:{height:"80vmin",width:"80vmin",margin:"auto"}}),mapElement:r.a.createElement("div",{style:{height:"100%"}}),isMarkerShown:this.state.isMarkerShown,onMarkerClick:this.handleMarkerClick,handleToggleOpen:this.handleToggleOpen,isOpen:this.state.isOpen,onClick:this.handleClick,location:this.state.location,handleClick:this.handleClick,mapClicked:this.state.mapClicked,selectSite:this.selectSite}))),this.state.currentIndex<0?r.a.createElement("h2",{id:"siteSelect"},"Choose a site!"):r.a.createElement("section",{className:"siteSelect",ref:function(t){e.siteSelect=t}},r.a.createElement(Ca,{index:this.state.currentIndex,energy_budget:0}))):r.a.createElement("h2",null,"Add a site to get started!")),r.a.createElement("div",{id:"bugSpacing"}))}}]),t}(n.Component),Ha=Object(Fe.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},button:{margin:"auto"},cardDiv:{marginTop:"5%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-evenly"},card:{paddingTop:"2vmin",width:"30vmin",height:"37vmin",margin:10,textAlign:"center"},icon:{width:"10vmin",height:"10vmin"}}})(Object(l.b)(function(e){return{sitesByProject:e.sitesByProject,project:e.project,allSiteTypes:e.allSiteTypes}})(Ja)),qa=(a(761),function(e){function t(){var e,a;Object(Te.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(we.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(r)))).state={projectName:"",user_id:a.props.user.id,image_url:""},a.handleSubmit=function(e){e.preventDefault(),a.props.dispatch({type:"ADD_PROJECT",payload:a.state}),a.setState({projectName:""}),a.props.history.push("/dashboard")},a.handleChange=function(e){return function(t){a.setState(Object(Be.a)({},a.state,Object(Me.a)({},e,t.target.value)))}},a}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement("h1",{className:"heading"},"Add Project"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(Ye.a,{id:"standard-name",label:"Project Name",className:e.textField,value:this.state.projectName,required:!0,onChange:this.handleChange("projectName"),margin:"normal"}),r.a.createElement(Ye.a,{id:"standard-name",label:"Image URL",className:e.textField,value:this.state.image_url,onChange:this.handleChange("image_url"),margin:"normal"}),r.a.createElement(He.a,{value:"submit",type:"submit",variant:"contained",color:"primary",className:e.button},"Add Project")),r.a.createElement("div",{id:"bugSpacing"}))}}]),t}(n.Component)),Ya=Object(nt.a)(Object(Fe.withStyles)(function(e){return{container:{display:"flex",flexWrap:"wrap"},button:{margin:e.spacing.unit},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:200}}})(Object(l.b)(function(e){return{state:e,user:e.user}})(qa))),Za=a(315),$a=a.n(Za),Va=function(e){function t(){var e,a;Object(Te.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(we.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(r)))).selectProject=function(e){a.props.dispatch({type:"SELECT_PROJECT",payload:e}),console.log("project id:",e),a.props.dispatch({type:"GET_PROJECT",payload:e}),a.props.dispatch({type:"GET_SITES_BY_PROJECT",payload:e}),a.props.history.push("/project")},a.handleAddProject=function(){a.props.history.push("/add_project")},a}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"GET_PROJECTS",payload:{id:this.props.user.id}}),this.props.dispatch({type:"FETCH_ALL_SITE_TYPES"})}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement("h1",{className:"heading"},"Dashboard"),r.a.createElement("h2",{className:"subHeading"},"Projects",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(He.a,{onClick:this.handleAddProject,size:"large",variant:"contained",color:"primary"},"Add Project")),r.a.createElement("div",null,r.a.createElement("div",null),this.props.projects.length?r.a.createElement("div",null,r.a.createElement("div",{className:t.cardDiv},this.props.projects.map(function(a,n){return r.a.createElement(Nt.a,{className:t.card,key:n},r.a.createElement($a.a,{className:t.media,image:a.image||"http://vibrance.co/clarity/img/Project-Icon.png",title:a.name}),r.a.createElement(Pt.a,null,r.a.createElement(Ge.a,{variant:"h5"},a.name)),r.a.createElement(It.a,null,r.a.createElement("div",{className:t.button},r.a.createElement(He.a,{size:"medium",variant:"outlined",color:"secondary",onClick:function(){return e.selectProject(a.id)}},"Select Project"))))}))):r.a.createElement("h3",{className:"heading"},"Add a project to get started!")),r.a.createElement("div",{id:"bugSpacing"}))}}]),t}(n.Component),Xa=Object(Fe.withStyles)(function(e){return{button:{width:"100%",margin:"auto"},cardDiv:{marginTop:"5%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-evenly"},card:{width:"30vmin",height:"40vmin",margin:10,textAlign:"center"},media:{height:"20vmin"}}})(Object(l.b)(function(e){return{state:e,user:e.user,projects:e.projectsReducer}})(Va)),Ka=(a(764),function(e){function t(){return Object(Te.a)(this,t),Object(we.a)(this,Object(ke.a)(t).apply(this,arguments))}return Object(_e.a)(t,e),Object(xe.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"FETCH_USER"})}},{key:"render",value:function(){return r.a.createElement(Ne.a,null,r.a.createElement("div",null,r.a.createElement(Ae,null),r.a.createElement(De.a,null,r.a.createElement(Ie.a,{exact:!0,from:"/",to:"/add_site"}),r.a.createElement(lt,{exact:!0,path:"/dashboard",component:Xa}),r.a.createElement(lt,{exact:!0,path:"/add_project",component:Ya}),r.a.createElement(lt,{exact:!0,path:"/project",component:Ha}),r.a.createElement(lt,{exact:!0,path:"/saved_site",component:Ca}),r.a.createElement(Re.a,{exact:!0,path:"/add_site",component:Sa}),r.a.createElement(Re.a,{render:function(){return r.a.createElement("h1",null,"404")}})),r.a.createElement(Qe,null),r.a.createElement("div",null),r.a.createElement(tt,null)))}}]),t}(n.Component)),Qa=Object(l.b)()(Ka),en=Object(c.a)(),tn=[en],an=Object(i.d)(x,i.a.apply(void 0,tn));en.run(je),o.a.render(r.a.createElement(l.a,{store:an},r.a.createElement(Qa,null)),document.getElementById("react-root"))}},[[318,2,1]]]);
//# sourceMappingURL=main.47904129.chunk.js.map